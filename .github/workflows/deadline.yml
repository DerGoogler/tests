name: Submission Comment Bot

on:
  issues:
    types: [labeled]

jobs:
  check_deadlines:
    if: "contains(github.event.label.name, 'deadline: 2 weeks')"
    runs-on: ubuntu-latest

    steps:
    - name: "Post comment on label with \"deadline: 2 weeks\""
      uses: peter-evans/create-or-update-comment@v3
      with:
        token: ${{ secrets.GITHUB_TOKEN }}
        issue-number: ${{ github.event.issue.number }}
        body: |
          Hey @${{ github.event.issue.user.login }},

          your module submission was labeled with a deadline of **two weeks**. If you don't response within the two weeks your module will be rejected.

          Rest regards,
          The MMAR Team

  check_spam:
    if: "contains(github.event.label.name, 'spam')"
    runs-on: ubuntu-latest

    steps:
    - name: Close spam submission
      run: |
        gh issue close ${{ github.event.issue.number }} --reason "not planned" --comment "Submisson rejected due spam."
      env:
        GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
